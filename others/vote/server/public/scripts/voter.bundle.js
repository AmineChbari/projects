(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var e=io(),n="",o=function(t){n=t,document.getElementById("EtatVote").textContent="Ouvert",document.getElementById("voteActuel").textContent=t,document.getElementById("voteActuelUtilisateur").textContent="",l(!0);var e=document.getElementById("resultats");e&&(e.innerHTML="")},r=function(e){document.getElementById("EtatVote").textContent="Fermé",l(!1),document.getElementById("voteActuel").textContent="Vote terminé";var o={pour:0,contre:0,nppv:0,abstention:0};e.forEach((function(e){var n,r,c=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,c,l,d=[],i=!0,a=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;i=!1}else for(;!(i=(o=c.call(n)).done)&&(d.push(o.value),d.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(a)throw r}}return d}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=(c[0],c[1]);o[l]++})),document.getElementById("resultats").innerHTML='\n        <div class="mt-4">\n            <h3 class="text-xl font-semibold mb-2">Résultats du vote: "'.concat(n,'"</h3>\n            <div class="grid grid-cols-4 gap-4">\n                <div class="bg-blue-100 p-4 rounded">\n                    <div class="text-blue-700 font-bold">POUR</div>\n                    <div class="text-2xl">').concat(o.pour,'</div>\n                </div>\n                <div class="bg-red-100 p-4 rounded">\n                    <div class="text-red-700 font-bold">CONTRE</div>\n                    <div class="text-2xl">').concat(o.contre,'</div>\n                </div>\n                <div class="bg-yellow-100 p-4 rounded">\n                    <div class="text-yellow-700 font-bold">NPPV</div>\n                    <div class="text-2xl">').concat(o.nppv,'</div>\n                </div>\n                <div class="bg-gray-100 p-4 rounded">\n                    <div class="text-gray-700 font-bold">ABSTENTION</div>\n                    <div class="text-2xl">').concat(o.abstention,'</div>\n                </div>\n            </div>\n            <div class="mt-4">\n                <div class="text-sm text-gray-600">\n                    Total des votes: ').concat(e.length,"\n                </div>\n            </div>\n        </div>\n    ")},c=function(){document.getElementById("EtatVote").textContent="Admin déconnecté",document.getElementById("voteActuel").textContent="",document.getElementById("voteActuelUtilisateur").textContent="",l(!1)},l=function(t){document.querySelectorAll("button").forEach((function(e){return e.disabled=!t}))};e.on("welcome",(function(){console.log("Connected as voter"),e.emit("voter_connect"),e.on("start_vote",o),e.on("end_vote",(function(t){r(t)})),e.on("vote_updated",(function(t,n){t===e.id&&(document.getElementById("voteActuelUtilisateur").textContent="Votre vote : ".concat(n.toUpperCase()),l(!0))})),e.on("admin_disconnected",c),e.on("bye",(function(){console.log("Disconnected from server"),document.getElementById("message").textContent="Déconnecté du serveur"})),document.querySelectorAll("button").forEach((function(t){t.addEventListener("click",(function(){var n=t.id;console.log("Voting: ".concat(n)),e.emit("new_vote",n),document.getElementById("voteActuelUtilisateur").textContent="Votre vote actuel : ".concat(n.toUpperCase()),document.getElementById("message").textContent="Vote enregistré. Vous pouvez changer votre vote tant que le scrutin est ouvert.",l(!0)}))}))}))})();